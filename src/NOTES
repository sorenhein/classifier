2018-08-17
----------
Works reasonably well on transients now.
The +10 humps should only be eliminated in actuals towards the end.
Maybe also in synth differences.
Look at all traces one last time.


2018-08-03
----------

Trace
- level (after transient)
- sensor index (for calibration curve)
- overall trace
- overall peaks
- can cluster?
  detect the shortest real distance
- Segments

Can pass in an external reference cluster?
Can output a "string" relative to the reference cluster?
Externally match up with Needleman?
Penalty for any changes.

Segment types
- All segments have
  first
  last
  type

- Off

- Quiet
  sdev?

- Burst
  can detect morphological peaks (1-2-3), too many in fact (lenient)
  can integrate entire burst to v=a=0 on both ends (double)
  can detect peaks in space domain
  can clean up transient peaks (less than critical distance, declining)

  Some semantics to fit to e.g. 4 peaks (depending on matching train),
  knowing the right histogram (some too-short distances -> delete)
  
- Nonsense
  Means we may have missed a lot of peaks (*)


Peak position detection

- Eliminate a few "a" peaks based on too low starting "v", i.e.
  too low displacement

2018-07-17
----------
* Some _N and _R trains are almost impossible to separate
  - ICE4_DEU_28 is probably symmetric, in fact?
  - ICE2_DEU_48 ditto?
  - ICE1_old_CHE_56 ditto? [delete?]
  - ICE4_DEU_28 and ICET_DEU_28 have extremely similar ratios

* In doc, make the comments from Train axles.xlsx

* Files to finish:
  SynthTrain cpp and h
  driver.cpp

Visual          OK
mingw           OK
gcc
Mac gcc
Mac clang
Linux

Overall algorithm
-----------------

* Peak _positions_: 
  - Just do double integral.
  - Maybe force to 0.
  - Find envelope.
  - Detect peak positions.

* Or some kind of zero-crossing detector

* Then run the train matcher.

* Then look for peaks in the right places
  - Scale by v and a and shift by d
  - Know where there are quiet intervals as well
  - Integrate up and down
  - Find envelope
  - Detect peak values

* Check against laser measurements!

