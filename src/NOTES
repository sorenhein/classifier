2018-07-14
----------

* Small histogram of #trains in matches vector
  - Should we go to 4?
  - Should we improve the distance function in Clusters?
    - Intra clusters
    - warp
    - balance

* Do _N and _R have same clusters?


* Currently no distance penalty for numAdd and numDelete in Alignment

* Probably cut those actual peaks that are very far from distance peaks

* Correlate the rest on both sides

* Add up
  - Residuals
  - Added, subtracted
  - Missing, extras


Overall algorithm
-----------------

* Peak _positions_: 
  - Just do double integral.
  - Maybe force to 0.
  - Find envelope.
  - Detect peak positions.

* Then run the train matcher.

* Then look for peaks in the right places
  - Scale by v and a and shift by d
  - Know where there are quiet intervals as well
  - Integrate up and down
  - Find envelope
  - Detect peak values

* Check against laser measurements!

